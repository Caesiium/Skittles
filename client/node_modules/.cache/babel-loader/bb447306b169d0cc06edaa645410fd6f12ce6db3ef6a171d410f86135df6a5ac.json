{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lydia\\\\University\\\\Second Year\\\\Software engineering\\\\Skittles\\\\client\\\\src\\\\ShopItems.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ShopItems({\n  selectedItems,\n  setSelectedItems,\n  selectedSupermarket\n}) {\n  _s();\n  const [grocery, setGrocery] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [groceryError, setGroceryError] = useState('');\n  //const [selectedItems, setSelctedItems] = useState([]);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    const getGroceries = async () => {\n      try {\n        console.log('sup', selectedSupermarket.label);\n        const response = await axios.get('http://localhost:8080/api/ShopItems', {\n          supermarketName: selectedSupermarket.label\n        });\n        setGrocery(response.data);\n        setLoading(false);\n      } catch (err) {\n        setGroceryError(err);\n        setLoading(false);\n      }\n    };\n    getGroceries();\n  }, []);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 16\n    }, this);\n  }\n  if (groceryError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", groceryError.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 16\n    }, this);\n  }\n  const handleInputChanged = (grocery_id, quantity) => {\n    setSelectedItems(prevSelectedItems => {\n      const updatedItems = [...prevSelectedItems];\n      const index = updatedItems.findIndex(grocery => grocery.grocery_id === grocery_id);\n      if (index === -1) {\n        return [...prevSelectedItems, {\n          grocery_id,\n          quantity: Number(quantity)\n        }];\n        //updatedItems.push({ grocery_id, quantity: Number(quantity) });\n      } else {\n        const updatedItems = [...prevSelectedItems];\n        updatedItems[index].quantity = Number(quantity);\n        //updatedItems[index] = { grocery_id, quantity: Number(quantity) };\n      }\n      return updatedItems;\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    navigate('/EditOrder', {\n      state: {\n        selectedItems\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Select Items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [grocery.map(groceries => {\n        var _selectedItems$find;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"0\",\n            value: ((_selectedItems$find = selectedItems.find(grocery => grocery.grocery_id === groceries.grocery_id)) === null || _selectedItems$find === void 0 ? void 0 : _selectedItems$find.quantity) || 0,\n            onChange: e => handleInputChanged(groceries.grocery_id, e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: groceries.grocery_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)]\n        }, groceries.grocery_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Select Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(ShopItems, \"pwdrg3sxv26ugsIfbXTt1W00UbM=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = ShopItems;\nexport default ShopItems;\nvar _c;\n$RefreshReg$(_c, \"ShopItems\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","useLocation","jsxDEV","_jsxDEV","ShopItems","selectedItems","setSelectedItems","selectedSupermarket","_s","grocery","setGrocery","loading","setLoading","groceryError","setGroceryError","navigate","location","getGroceries","console","log","label","response","get","supermarketName","data","err","children","fileName","_jsxFileName","lineNumber","columnNumber","message","handleInputChanged","grocery_id","quantity","prevSelectedItems","updatedItems","index","findIndex","Number","handleSubmit","e","preventDefault","state","onSubmit","map","groceries","_selectedItems$find","type","min","value","find","onChange","target","grocery_name","_c","$RefreshReg$"],"sources":["C:/Users/lydia/University/Second Year/Software engineering/Skittles/client/src/ShopItems.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nfunction ShopItems({ selectedItems, setSelectedItems, selectedSupermarket }){\r\n\r\n    const [grocery, setGrocery] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [groceryError, setGroceryError] = useState('');\r\n    //const [selectedItems, setSelctedItems] = useState([]);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        const getGroceries = async () => {\r\n            try{\r\n                console.log('sup', selectedSupermarket.label);\r\n                const response = await axios.get('http://localhost:8080/api/ShopItems', {\r\n                    supermarketName: selectedSupermarket.label,\r\n                });\r\n                setGrocery(response.data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                setGroceryError(err);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        getGroceries();\r\n    }, []);\r\n\r\n    if(loading){\r\n        return <div>Loading...</div>;\r\n    }\r\n    if(groceryError){\r\n        return <div>Error: {groceryError.message}</div>;\r\n    }\r\n\r\n    const handleInputChanged = (grocery_id, quantity) => {\r\n        setSelectedItems((prevSelectedItems) => {\r\n           const updatedItems = [...prevSelectedItems];\r\n           const index = updatedItems.findIndex((grocery) => grocery.grocery_id === grocery_id);\r\n           if (index === -1){\r\n                return [...prevSelectedItems, { grocery_id, quantity: Number(quantity) }];\r\n                //updatedItems.push({ grocery_id, quantity: Number(quantity) });\r\n           } else {\r\n                const updatedItems = [...prevSelectedItems];\r\n                updatedItems[index].quantity = Number(quantity)\r\n                //updatedItems[index] = { grocery_id, quantity: Number(quantity) };\r\n           }\r\n           return updatedItems;\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async(e) => {\r\n        e.preventDefault();\r\n        navigate('/EditOrder', { state: { selectedItems } });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Select Items</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                {grocery.map((groceries) => (\r\n                    <div key={groceries.grocery_id}>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"0\"\r\n                            value={selectedItems.find(grocery => grocery.grocery_id === groceries.grocery_id)?.quantity || 0}\r\n                            onChange={(e) => handleInputChanged(groceries.grocery_id, e.target.value)}\r\n                        />\r\n                        <label>{groceries.grocery_name}</label>\r\n                    </div>\r\n                ))}\r\n                <button type=\"submit\">Select Items</button>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default ShopItems;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,EAAEC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAClE,SAASC,SAASA,CAAC;EAAEC,aAAa;EAAEC,gBAAgB;EAAEC;AAAoB,CAAC,EAAC;EAAAC,EAAA;EAExE,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiB,YAAY,EAAEC,eAAe,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EACpD;EACA,MAAMmB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAE9BJ,SAAS,CAAC,MAAM;IACZ,MAAMoB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAG;QACCC,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEZ,mBAAmB,CAACa,KAAK,CAAC;QAC7C,MAAMC,QAAQ,GAAG,MAAMvB,KAAK,CAACwB,GAAG,CAAC,qCAAqC,EAAE;UACpEC,eAAe,EAAEhB,mBAAmB,CAACa;QACzC,CAAC,CAAC;QACFV,UAAU,CAACW,QAAQ,CAACG,IAAI,CAAC;QACzBZ,UAAU,CAAC,KAAK,CAAC;MACrB,CAAC,CAAC,OAAOa,GAAG,EAAE;QACVX,eAAe,CAACW,GAAG,CAAC;QACpBb,UAAU,CAAC,KAAK,CAAC;MACrB;IACJ,CAAC;IACDK,YAAY,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,IAAGN,OAAO,EAAC;IACP,oBAAOR,OAAA;MAAAuB,QAAA,EAAK;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAChC;EACA,IAAGjB,YAAY,EAAC;IACZ,oBAAOV,OAAA;MAAAuB,QAAA,GAAK,SAAO,EAACb,YAAY,CAACkB,OAAO;IAAA;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EACnD;EAEA,MAAME,kBAAkB,GAAGA,CAACC,UAAU,EAAEC,QAAQ,KAAK;IACjD5B,gBAAgB,CAAE6B,iBAAiB,IAAK;MACrC,MAAMC,YAAY,GAAG,CAAC,GAAGD,iBAAiB,CAAC;MAC3C,MAAME,KAAK,GAAGD,YAAY,CAACE,SAAS,CAAE7B,OAAO,IAAKA,OAAO,CAACwB,UAAU,KAAKA,UAAU,CAAC;MACpF,IAAII,KAAK,KAAK,CAAC,CAAC,EAAC;QACZ,OAAO,CAAC,GAAGF,iBAAiB,EAAE;UAAEF,UAAU;UAAEC,QAAQ,EAAEK,MAAM,CAACL,QAAQ;QAAE,CAAC,CAAC;QACzE;MACL,CAAC,MAAM;QACF,MAAME,YAAY,GAAG,CAAC,GAAGD,iBAAiB,CAAC;QAC3CC,YAAY,CAACC,KAAK,CAAC,CAACH,QAAQ,GAAGK,MAAM,CAACL,QAAQ,CAAC;QAC/C;MACL;MACA,OAAOE,YAAY;IACtB,CAAC,CAAC;EACN,CAAC;EAED,MAAMI,YAAY,GAAG,MAAMC,CAAC,IAAK;IAC7BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB3B,QAAQ,CAAC,YAAY,EAAE;MAAE4B,KAAK,EAAE;QAAEtC;MAAc;IAAE,CAAC,CAAC;EACxD,CAAC;EAED,oBACIF,OAAA;IAAAuB,QAAA,gBACIvB,OAAA;MAAAuB,QAAA,EAAI;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrB3B,OAAA;MAAMyC,QAAQ,EAAEJ,YAAa;MAAAd,QAAA,GACxBjB,OAAO,CAACoC,GAAG,CAAEC,SAAS;QAAA,IAAAC,mBAAA;QAAA,oBACnB5C,OAAA;UAAAuB,QAAA,gBACIvB,OAAA;YACI6C,IAAI,EAAC,QAAQ;YACbC,GAAG,EAAC,GAAG;YACPC,KAAK,EAAE,EAAAH,mBAAA,GAAA1C,aAAa,CAAC8C,IAAI,CAAC1C,OAAO,IAAIA,OAAO,CAACwB,UAAU,KAAKa,SAAS,CAACb,UAAU,CAAC,cAAAc,mBAAA,uBAA1EA,mBAAA,CAA4Eb,QAAQ,KAAI,CAAE;YACjGkB,QAAQ,EAAGX,CAAC,IAAKT,kBAAkB,CAACc,SAAS,CAACb,UAAU,EAAEQ,CAAC,CAACY,MAAM,CAACH,KAAK;UAAE;YAAAvB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7E,CAAC,eACF3B,OAAA;YAAAuB,QAAA,EAAQoB,SAAS,CAACQ;UAAY;YAAA3B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GAPjCgB,SAAS,CAACb,UAAU;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQzB,CAAC;MAAA,CACT,CAAC,eACF3B,OAAA;QAAQ6C,IAAI,EAAC,QAAQ;QAAAtB,QAAA,EAAC;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAId;AAACtB,EAAA,CA3EQJ,SAAS;EAAA,QAMGJ,WAAW,EACXC,WAAW;AAAA;AAAAsD,EAAA,GAPvBnD,SAAS;AA6ElB,eAAeA,SAAS;AAAC,IAAAmD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}