{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lydia\\\\University\\\\Year 2\\\\Software Engineering\\\\Skittles\\\\client\\\\src\\\\ShopItems.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ShopItems() {\n  _s();\n  var _location$state2;\n  const [grocery, setGrocery] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [groceryError, setGroceryError] = useState('');\n  const [selectedItems, setSelctedItems] = useState([]);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    var _location$state;\n    if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.selectedItems) {\n      setSelctedItems(location.state.selectedItems);\n    }\n    const getGroceries = async () => {\n      try {\n        const response = await axios.get('http://localhost:8080/api/ShopItems');\n        console.log('Fetched: ', response.data);\n        setGrocery(response.data);\n        setLoading(false);\n      } catch (err) {\n        setGroceryError(err);\n        setLoading(false);\n      }\n    };\n    getGroceries();\n  }, [(_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.selectedItems]);\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 16\n    }, this);\n  }\n  if (groceryError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", groceryError.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 16\n    }, this);\n  }\n  const handleInputChanged = (grocery_id, quantity) => {\n    setSelctedItems(prevSelectedItems => {\n      const updatedItems = [...prevSelectedItems];\n      const index = updatedItems.findIndex(grocery => grocery.grocery_id === grocery_id);\n      if (index === -1) {\n        updatedItems.push({\n          grocery_id,\n          quantity: Number(quantity)\n        });\n      } else {\n        updatedItems[index] = {\n          grocery_id,\n          quantity: Number(quantity)\n        };\n      }\n      return updatedItems;\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    navigate('/EditOrder', {\n      state: {\n        selectedItems\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Select Items\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [grocery.map(groceries => {\n        var _selectedItems$find;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"0\",\n            value: ((_selectedItems$find = selectedItems.find(grocery => grocery.grocery_id === groceries.grocery_id)) === null || _selectedItems$find === void 0 ? void 0 : _selectedItems$find.quantity) || 0,\n            onChange: e => handleInputChanged(groceries.grocery_id, e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: groceries.grocery_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this)]\n        }, groceries.grocery_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Select Items\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(ShopItems, \"bZeA3HkLmKJo8s0GyKHBg0LoD24=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = ShopItems;\nexport default ShopItems;\nvar _c;\n$RefreshReg$(_c, \"ShopItems\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","useLocation","jsxDEV","_jsxDEV","ShopItems","_s","_location$state2","grocery","setGrocery","loading","setLoading","groceryError","setGroceryError","selectedItems","setSelctedItems","navigate","location","_location$state","state","getGroceries","response","get","console","log","data","err","children","fileName","_jsxFileName","lineNumber","columnNumber","message","handleInputChanged","grocery_id","quantity","prevSelectedItems","updatedItems","index","findIndex","push","Number","handleSubmit","e","preventDefault","onSubmit","map","groceries","_selectedItems$find","type","min","value","find","onChange","target","grocery_name","_c","$RefreshReg$"],"sources":["C:/Users/lydia/University/Year 2/Software Engineering/Skittles/client/src/ShopItems.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nfunction ShopItems(){\r\n\r\n    const [grocery, setGrocery] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [groceryError, setGroceryError] = useState('');\r\n    const [selectedItems, setSelctedItems] = useState([]);\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    useEffect(() => {\r\n        if(location.state?.selectedItems) {\r\n            setSelctedItems(location.state.selectedItems);\r\n        }\r\n        const getGroceries = async () => {\r\n            try{\r\n                const response = await axios.get('http://localhost:8080/api/ShopItems');\r\n                console.log('Fetched: ', response.data);\r\n                setGrocery(response.data);\r\n                setLoading(false);\r\n            } catch (err) {\r\n                setGroceryError(err);\r\n                setLoading(false);\r\n            }\r\n        };\r\n        getGroceries();\r\n    }, [location.state?.selectedItems]);\r\n\r\n    if(loading){\r\n        return <div>Loading...</div>;\r\n    }\r\n    if(groceryError){\r\n        return <div>Error: {groceryError.message}</div>;\r\n    }\r\n\r\n    const handleInputChanged = (grocery_id, quantity) => {\r\n        setSelctedItems((prevSelectedItems) => {\r\n           const updatedItems = [...prevSelectedItems];\r\n           const index = updatedItems.findIndex((grocery) => grocery.grocery_id === grocery_id);\r\n           if (index === -1){\r\n                updatedItems.push({ grocery_id, quantity: Number(quantity) });\r\n           } else {\r\n            updatedItems[index] = { grocery_id, quantity: Number(quantity) };\r\n           }\r\n           return updatedItems;\r\n        });\r\n    };\r\n\r\n    const handleSubmit = async(e) => {\r\n        e.preventDefault();\r\n        navigate('/EditOrder', { state: { selectedItems } });\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h1>Select Items</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                {grocery.map((groceries) => (\r\n                    <div key={groceries.grocery_id}>\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"0\"\r\n                            value={selectedItems.find(grocery => grocery.grocery_id === groceries.grocery_id)?.quantity || 0}\r\n                            onChange={(e) => handleInputChanged(groceries.grocery_id, e.target.value)}\r\n                        />\r\n                        <label>{groceries.grocery_name}</label>\r\n                    </div>\r\n                ))}\r\n                <button type=\"submit\">Select Items</button>\r\n            </form>\r\n        </div>\r\n    );\r\n\r\n\r\n}\r\n\r\nexport default ShopItems;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}